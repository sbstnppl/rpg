# TODO: GM Hallucinates Item Keys

## Investigation Phase
- [x] Reproduce the issue
- [x] Identify affected code paths
- [x] Document current behavior
- [x] Find root cause

## Design Phase
- [x] Propose solution
- [x] Identify files to modify
- [x] Define test cases
- [x] Review with user (if needed)

## Implementation Phase
- [x] Improve key formatting in context (KEY=x | Name format)
- [x] Add key validation in tool execution
- [x] Fix error handling instructions in prompt (remove "narrate as if succeeded")
- [x] Add valid keys to error messages
- [x] Add/update tests

## Verification Phase
- [x] Test manually with item operations
- [x] Verify keys are copied correctly
- [x] Run test suite
- [ ] Verify fix in gameplay

## Completion
- [x] Update README.md status to "Done"
- [ ] Create commit with `/commit`
